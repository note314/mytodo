# MyToDo PWA 要件定義書 v2.0

## 1. プロジェクト概要

### 1.1 プロジェクト名
**MyToDo**

### 1.2 アプリケーション種別
- PWA（Progressive Web Application）
- インストール対応
- オフライン動作前提

### 1.3 アプリケーション概要
ToDoリスト型式のタスク管理アプリケーション。ミニマルな装飾と機能を目指し、スマートフォン特化で最適化されたシンプルなタスク管理を提供する。

## 2. 技術要件

### 2.1 対応デバイス・画面
- **プライマリ**: スマートフォン（レスポンシブ対応）
- **セカンダリ**: PC・タブレット（余白を背景でカバー）

### 2.2 データ管理
- **保存方式**: ローカルストレージ（localStorage）
- **永続化**: 不要（アプリ削除時にデータ消去）
- **オフライン対応**: 完全オフライン動作

### 2.3 PWA要件
- Service Worker実装
- manifest.json設定
- インストール機能
- ホーム画面アイコン（クライアント提供）

### 2.4 アイコン実装要件
- **SVGアイコン使用**: 絵文字依存を避け、カスタムSVGアイコンで統一
- **端末非依存**: 全デバイスで同一の外観を保証
- **自作SVG**: 外部ライブラリに依存せず、要件に最適化されたアイコンを自作
- **対象アイコン**: チェックマーク、バツマーク、プラス、アーカイブ、削除

## 3. 言語・UI設計要件

### 3.1 UI言語
- **インターフェース**: 英語統一
- **コンテンツ**: 日本語・英語・多言語対応（UTF-8）

### 3.2 UI英語表記一覧
```
メイン画面:
- Archive（アーカイブ）
- Delete（削除実行）
- ← Swipe to Archive（スワイプヒント）

モーダル:
- Title（タイトル）
- Note（メモ）
- Save / Execute（実行）
- Cancel（キャンセル）

アーカイブ画面:
- Back to Tasks（ToDoリストに戻る）
- Clear Archive（アーカイブ削除）

確認ダイアログ:
- Delete this task?（削除確認）
- Clear all archived tasks?（アーカイブ削除確認）

長押しメニュー:
- Copy to Tasks（ToDoリストにコピー作成）
- Remove from Archive（アーカイブから削除）
```

## 4. デザイン要件

### 4.1 デザインコンセプト
- **トンマナ**: インダストリアル調ダークテーマ
- **装飾**: ミニマル（装飾最小限）
- **テーマ**: ダークテーマ固定（選択機能不要）

### 4.2 カラーパレット
- **ベース**: `gray-900` (深い黒 #111827)
- **セカンダリ**: `gray-800` (要素背景 #1f2937)
- **ボーダー**: `gray-700` (区切り線 #374151)
- **テキスト**: `gray-200` (メイン #e5e7eb)、`gray-300` (セカンダリ #d1d5db)
- **アクセント**: `emerald-600` (完了 #059669)、`red-600` (削除 #dc2626)
- **スワイプヒント**: `emerald-500` (視認性向上 #10b981)

### 4.3 レスポンシブ対応
- スマートフォン特化最適化（max-width: 448px）
- PC・タブレット表示時は余白を背景色でカバー
- キーボードショートカット不要

## 5. 機能要件

### 5.1 画面構成
1. **スプラッシュスクリーン**
2. **メイン画面**（タスク一覧）
3. **タスク登録モーダル**
4. **タスク詳細モーダル**
5. **アーカイブ画面**

### 5.2 スプラッシュスクリーン
#### 5.2.1 表示仕様
- **表示時間**: 0.75秒（内0.25秒でフェードアウト）
- **表示テキスト**: "Done is better than Perfect."
- **テキスト色**:
  - "Done": オレンジ
  - "is better than": 白
  - "Perfect": 紫

#### 5.2.2 動作仕様
- アプリ起動時に1回表示
- 自動的にメイン画面に遷移

### 5.3 メイン画面（タスク一覧）

#### 5.3.1 表示仕様
- **タスク表示形式**: 1行表示
- **表示レイアウト**:
  ```
  ✅ Task title short                     ❌
  ✅ Long task title will be truncated... ❌
  ✅ Very long task title truncated...    ❌
  ```

#### 5.3.2 レイアウト仕様
- **完了チェック**: 左端固定（カスタムSVGアイコン）
- **削除予定チェック**: 右端固定で縦1列整列（カスタムSVGアイコン）
- **タイトル部分**: 1行表示、超過部分は省略記号（...）
- **2列表示**: 禁止
- **並び順**: 作成日時順（古い→新しい）

#### 5.3.3 操作仕様
- **完了チェック**: タップでON/OFF切り替え
- **削除予定チェック**: タップでON/OFF切り替え
- **タイトルタップ**: 詳細モーダル表示
- **長押し**: ドラッグ&ドロップで並び替え
- **左スワイプ**: アーカイブ化（アニメーション付き）

#### 5.3.4 スワイプ操作詳細
- **判定ロジック**: 勢いよく操作された場合のみ実行
- **中断時**: 途中で止まった場合は無効
- **アニメーション**: スライドアニメーション実装

#### 5.3.5 スワイプヒント表示
- **位置**: タスクリスト最下部の欄外に中央表示
- **テキスト**: "← Swipe to Archive"
- **色**: `emerald-500`（視認性向上）
- **透明度**: `opacity-80`

#### 5.3.6 スクロール
- 画面外に溢れる場合はスクロール対応

#### 5.3.7 画面下部固定メニュー
- **Archiveボタン**: アーカイブ画面に移動
- **Deleteボタン**: 削除予定チェック済みタスクを削除

### 5.4 タスク登録モーダル

#### 5.4.1 入力項目
- **Title**: 必須入力（日本語・英語対応）
- **Note**: 任意入力（日本語・英語対応）

#### 5.4.2 操作仕様
- **Save/Executeボタン**: タスク作成・保存
- **Cancelボタン**: 処理中断
- **モーダル外タップ**: モーダル閉じる
- **閉じるボタン**: 不要

#### 5.4.3 データ保存
- **作成日時**: 自動記録
- **完了日時**: 初期値null

### 5.5 タスク詳細モーダル

#### 5.5.1 表示項目
- **Title**: 編集可能（日本語・英語対応）
- **発生日時**: 表示のみ
- **完了日時**: 表示のみ
- **Note**: 編集可能（25文字程度表示、日本語・英語対応）

#### 5.5.2 操作仕様
- **Save/Executeボタン**: 編集内容保存
- **Cancelボタン**: 編集内容破棄
- **モーダル外タップ**: モーダル閉じる
- **閉じるボタン**: 不要

#### 5.5.3 編集機能
- **タイトル編集**: 可能
- **メモ編集**: 可能
- **日時編集**: 不可

### 5.6 アーカイブ画面

#### 5.6.1 表示仕様
- **表示形式**:
  ```
  ✅ Complete task example
  2025.07.09〜2024.07.20

  ◻️ Incomplete task example
  2025.07.21〜XXXX/XX/XX
  ```

#### 5.6.2 表示ルール
- **完了タスク**: 完了日表示
- **未完了タスク**: 完了日は「XXXX/XX/XX」表示
- **コンパクト表示**: タスク名/登録日/完了日

#### 5.6.3 操作仕様
- **長押し**: メニュー表示
  1. Copy to Tasks（ToDoリストにコピー作成）
  2. Remove from Archive（アーカイブから削除、モーダル確認）

#### 5.6.4 画面下部固定メニュー
- **Back to Tasks**: メイン画面に戻る
- **Clear Archive**: 赤字表示、モーダル確認

### 5.7 タスクコピー機能
- **実行**: 同名タスクを新規作成
- **配置**: リスト最下部に配置
- **データ**: 作成日時は実行時点で新規生成

## 6. データ仕様

### 6.1 タスクデータ構造
```javascript
{
  id: string,           // 一意識別子
  title: string,        // タスクタイトル（多言語対応）
  memo: string,         // メモ（多言語対応）
  createdAt: Date,      // 作成日時
  completedAt: Date|null, // 完了日時
  isCompleted: boolean, // 完了フラグ
  isDeleted: boolean,   // 削除予定フラグ
  order: number,        // 並び順
  isArchived: boolean   // アーカイブフラグ
}
```

### 6.2 データ操作ルール
- **作成**: 新規タスクは最下部（最新order値+1）
- **完了**: isCompletedフラグ更新、completedAt記録
- **削除**: 物理削除（データ完全削除）
- **アーカイブ**: isArchivedフラグ更新
- **並び替え**: order値更新

### 6.3 文字エンコーディング
- **UTF-8**: 日本語・英語・記号・絵文字すべて対応
- **入力制限**: なし（OS標準IME対応）

## 7. モーダル共通仕様

### 7.1 表示仕様
- **閉じるボタン**: 全モーダルで不要
- **背景タップ**: モーダル外タップでモーダル閉じる
- **ボタン構成**: Save(Execute)/Cancelのみ

### 7.2 確認モーダル
- **削除確認**: "Delete this task?"
- **アーカイブ削除確認**: "Clear all archived tasks?"

## 8. 不要機能（実装対象外）

### 8.1 除外機能
- 検索機能
- カテゴリ/タグ機能
- 期限設定
- 統計表示
- 通知機能
- テーマ選択機能
- キーボードショートカット

### 8.2 除外対応
- データ永続化（クラウド連携等）
- 多言語UI切り替え
- ライト/ダークテーマ切り替え

## 9. 開発・運用要件

### 9.1 開発環境
- Claude Code使用
- 実装言語: JavaScript/HTML/CSS
- フレームワーク: 任意（Vanilla JS可）

### 9.2 パフォーマンス要件
- 初期表示: 2秒以内
- 操作レスポンス: 0.3秒以内
- オフライン動作: 完全対応

### 9.3 ブラウザ対応
- モダンブラウザ対応
- Service Worker対応ブラウザ
- PWA対応ブラウザ

### 9.4 フォント要件
- 日本語フォント対応（ヒラギノ、游ゴシック、Noto Sans JP等）
- 英数字との混在表示最適化
- Web Safe Fonts使用

## 10. 成果物

### 10.1 deliverables
1. **ソースコード一式**
2. **manifest.json**
3. **Service Worker**
4. **README.md**（セットアップ手順）
5. **カスタムSVGアイコンセット**

### 10.2 提供予定
- **アプリアイコン**: クライアント提供

---

**要件定義書作成日**: 2025年7月10日  
**最終更新日**: 2025年7月10日  
**作成者**: Claude (Anthropic)  
**バージョン**: 2.0

### 変更履歴
- **v1.0→v2.0**: 英語UI化、SVGアイコン要件、多言語コンテンツ対応、スワイプヒント位置・色調整